<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  
  <head>
    <meta http-equiv="Content-Type" content="text/html" />
    <link rel="stylesheet" type="text/css" href="/static/main.css" /> 
    <title>Texada</title>
  </head>


  <body>
    <table id="main">

      <tr><td colspan=2>
          <h2><a href="https://bitbucket.org/bestchai/texada">Texada</a>: temporal property miner</h2>
          <br/>
      </td></tr>

      <tr>
        <td>
          <form action="/texada/mine/" method="POST">
            <div><h3>Log:</h3>
              <textarea class="input" name="body" rows="15" cols="40">a
b
c
--
b
b
c
a
--
c
a
b
c
--</textarea></div>
            <div><h3>Args:</h3><input class="input" name="args" size="40" id="args" value="-f 'G(x -> XF y)' -l"/></div>
            <br/>
            <div><input class="button" id = "mine" type="submit" value="Mine property instances"></div>
            </form>
        </td>
        <td valign="top">
          <h3>
            {{.OutputTitle}}
          </h3>
          <div id="result" class="output" style="display:{{.OutputDisplay}}">{{.OutputJSON}} </div>
        </td>
      </tr> 

      <tr><td></td>
<td>
<div id="footer">
Last updated: September 21, 2014
</div>
<!--
Local Variables:
time-stamp-start: "^Last updated: "
time-stamp-end: "\\.?$"
time-stamp-format: "%:b %:d, %:y"
time-stamp-line-limit: -50
End:
-->
</td></tr>
    </table>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>
    $( document ).ready(function() {
            if ("{{.OutputJSON}}"!= ""){
              var output_obj = jQuery.parseJSON("{{.OutputJSON}}");
              var prop_type = output_obj["prop-type"]["str"];
              var instants = output_obj["prop-instances"];
              var out_str = "Valid bindings:<br>";
              for (i = 0; i < instants.length; i++){
                  out_str += "["
                  for (var prop in instants[i]){
                     out_str += prop + "->" + instants[i][prop] + ", "; 
                  }
                  // remove last comma
                  out_str = out_str.slice(0,-2);
                  out_str +=  "]<br>";
              }
                $("div.output").replaceWith('<div id="result" class="output" style="display:{{.OutputDisplay}}">'+ out_str +'</div>');
            }
 
    });
    </script>

  </body>
</html>


